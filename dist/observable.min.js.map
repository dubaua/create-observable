{"version":3,"file":"observable.min.js","sources":["../src/observable.js"],"sourcesContent":["/**\r\n * Creates reactive object allowing set new value and subscribe to the value change.\r\n * If new value isn't equal to previous, each callback passed via subscribe method will be fired.\r\n * @class Observable\r\n */\r\nclass Observable {\r\n  /** Internal value storage\r\n   * @type {*}\r\n   */\r\n  internal;\r\n\r\n  /** Array of callbacks\r\n   * @type {Array<function>}\r\n   */\r\n  callbacks = [];\r\n\r\n  /** Allows to set initial value\r\n   * @param {*} initial\r\n   */\r\n  constructor(initial) {\r\n    this.internal = initial;\r\n  }\r\n\r\n  /**\r\n   * Higher order function acceping subscriber and returning unsubscriber\r\n   * @param {function} callback a function accepting next and prev values\r\n   * @returns {function} unsubscriber function stops firing callback\r\n   */\r\n  subscribe(callback) {\r\n    if (typeof callback !== 'function') {\r\n      throw new TypeError('[createObservable]: expected callback to be a function.');\r\n    }\r\n    this.callbacks.push(callback);\r\n    return () => {\r\n      const index = this.callbacks.indexOf(callback);\r\n      this.callbacks = this.callbacks.slice(0, index).concat(this.callbacks.slice(index + 1));\r\n    };\r\n  }\r\n\r\n  get value() {\r\n    return this.internal;\r\n  }\r\n\r\n  set value(next) {\r\n    if (next !== this.internal) {\r\n      const prev = this.internal;\r\n      this.internal = next;\r\n      for (let i = 0; i < this.callbacks.length; i++) {\r\n        this.callbacks[i](this.internal, prev);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Observable;\r\n"],"names":["initial","callbacks","this","internal","subscribe","callback","TypeError","push","index","_this","indexOf","slice","concat","next","prev","i","length"],"mappings":"uCAmBE,oBAAYA,QALZC,UAAY,GAMVC,KAAKC,SAAWH,oCAQlBI,UAAA,SAAUC,cACR,GAAwB,mBAAbA,EACT,UAAUC,UAAU,2DAGtB,OADAJ,KAAKD,UAAUM,KAAKF,cAElB,IAAMG,EAAQC,EAAKR,UAAUS,QAAQL,GACrCI,EAAKR,UAAYQ,EAAKR,UAAUU,MAAM,EAAGH,GAAOI,OAAOH,EAAKR,UAAUU,MAAMH,EAAQ,sCAKtF,YAAYL,uBAGJU,GACR,GAAIA,IAASX,KAAKC,SAAU,CAC1B,IAAMW,EAAOZ,KAAKC,SAClBD,KAAKC,SAAWU,EAChB,IAAK,IAAIE,EAAI,EAAGA,EAAIb,KAAKD,UAAUe,OAAQD,IACzCb,KAAKD,UAAUc,GAAGb,KAAKC,SAAUW"}